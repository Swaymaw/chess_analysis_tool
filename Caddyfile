bishup.com, www.bishup.com {
    encode gzip

    @api_no_slash path /api
    redir @api_no_slash /api/

    # Route API calls to the backend
    handle_path /api/* {
        reverse_proxy backend:8000 {
            header_up X-Real-IP {remote_host}
            header_up X-Forwarded-For {remote_host}
            header_up X-Forwarded-Proto {scheme}
            # preserve Host header if you need to: header_up Host {host}
        }
    }
    @static {
        path /assets/*
        path *.js
        path *.css
        path *.svg
        path *.png
        path *.jpg
        path *.jpeg
        path *.webp
        path *.ico
    }

    handle @static {
        reverse_proxy frontend:80
    }

    # All other paths â†’ SPA fallback
    handle {
        rewrite * /index.html
        reverse_proxy frontend:80
    }
}
